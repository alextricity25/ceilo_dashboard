require 'rest_client' 
require 'json' 

token = "MIIOkgYJKoZIhvcNAQcCoIIOgzCCDn8CAQExCTAHBgUrDgMCGjCCDOgGCSqGSIb3DQEHAaCCDNkEggzVeyJhY2Nlc3MiOiB7InRva2VuIjogeyJpc3N1ZWRfYXQiOiAiMjAxMy0xMC0wM1QwNDozNTo1Ny42MTk3MTQiLCAiZXhwaXJlcyI6ICIyMDEzLTEwLTA0VDA0OjM1OjU3WiIsICJpZCI6ICJwbGFjZWhvbGRlciIsICJ0ZW5hbnQiOiB7ImRlc2NyaXB0aW9uIjogIiIsICJlbmFibGVkIjogdHJ1ZSwgImlkIjogImQyZjdkNzkzOWQ1NzQ2N2JhZDU4ZjYzZTIyOTU3MGM4IiwgIm5hbWUiOiAiYWRtaW4ifX0sICJzZXJ2aWNlQ2F0YWxvZyI6IFt7ImVuZHBvaW50cyI6IFt7ImFkbWluVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzQvdjIvZDJmN2Q3OTM5ZDU3NDY3YmFkNThmNjNlMjI5NTcwYzgiLCAicmVnaW9uIjogIlJlZ2lvbk9uZSIsICJpbnRlcm5hbFVSTCI6ICJodHRwOi8vMTY2Ljc4LjE4LjIwOTo4Nzc0L3YyL2QyZjdkNzkzOWQ1NzQ2N2JhZDU4ZjYzZTIyOTU3MGM4IiwgImlkIjogIjdjODI1NGQxNzY4ZTQzZjA4MTM0YjhmNGI0OWFhNTVhIiwgInB1YmxpY1VSTCI6ICJodHRwOi8vMTY2Ljc4LjE4LjIwOTo4Nzc0L3YyL2QyZjdkNzkzOWQ1NzQ2N2JhZDU4ZjYzZTIyOTU3MGM4In1dLCAiZW5kcG9pbnRzX2xpbmtzIjogW10sICJ0eXBlIjogImNvbXB1dGUiLCAibmFtZSI6ICJub3ZhIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3Ni92Mi9kMmY3ZDc5MzlkNTc0NjdiYWQ1OGY2M2UyMjk1NzBjOCIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzYvdjIvZDJmN2Q3OTM5ZDU3NDY3YmFkNThmNjNlMjI5NTcwYzgiLCAiaWQiOiAiN2ZiYWM4OTIyNmZkNDI1YmI1NzVlZDU3ODc0MDY2ZmQiLCAicHVibGljVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzYvdjIvZDJmN2Q3OTM5ZDU3NDY3YmFkNThmNjNlMjI5NTcwYzgifV0sICJlbmRwb2ludHNfbGlua3MiOiBbXSwgInR5cGUiOiAidm9sdW1ldjIiLCAibmFtZSI6ICJjaW5kZXIifSwgeyJlbmRwb2ludHMiOiBbeyJhZG1pblVSTCI6ICJodHRwOi8vMTY2Ljc4LjE4LjIwOTo4Nzc0L3YzIiwgInJlZ2lvbiI6ICJSZWdpb25PbmUiLCAiaW50ZXJuYWxVUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3NC92MyIsICJpZCI6ICIxOWI2ZWVhM2E3YTQ0ZTRjYTVkYTcxMzRhNjRiZDIxNSIsICJwdWJsaWNVUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3NC92MyJ9XSwgImVuZHBvaW50c19saW5rcyI6IFtdLCAidHlwZSI6ICJjb21wdXRldjMiLCAibmFtZSI6ICJub3ZhIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6MzMzMyIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5OjMzMzMiLCAiaWQiOiAiMzVmNTA1OGVhMTI3NDRlNThjYmRkYzFmYjExOTFjMjYiLCAicHVibGljVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5OjMzMzMifV0sICJlbmRwb2ludHNfbGlua3MiOiBbXSwgInR5cGUiOiAiczMiLCAibmFtZSI6ICJzMyJ9LCB7ImVuZHBvaW50cyI6IFt7ImFkbWluVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5OjkyOTIiLCAicmVnaW9uIjogIlJlZ2lvbk9uZSIsICJpbnRlcm5hbFVSTCI6ICJodHRwOi8vMTY2Ljc4LjE4LjIwOTo5MjkyIiwgImlkIjogIjRhYjJiMzA1ZThkYzQ2YjM4NzUzZGYyMGEwMjAzYjg2IiwgInB1YmxpY1VSTCI6ICJodHRwOi8vMTY2Ljc4LjE4LjIwOTo5MjkyIn1dLCAiZW5kcG9pbnRzX2xpbmtzIjogW10sICJ0eXBlIjogImltYWdlIiwgIm5hbWUiOiAiZ2xhbmNlIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3NyIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzciLCAiaWQiOiAiMTUzMzY3ZGVkYjIyNDk5Zjk5NzY3NTcxZTY3OTU3NmYiLCAicHVibGljVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzcifV0sICJlbmRwb2ludHNfbGlua3MiOiBbXSwgInR5cGUiOiAibWV0ZXJpbmciLCAibmFtZSI6ICJjZWlsb21ldGVyIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3Ni92MS9kMmY3ZDc5MzlkNTc0NjdiYWQ1OGY2M2UyMjk1NzBjOCIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzYvdjEvZDJmN2Q3OTM5ZDU3NDY3YmFkNThmNjNlMjI5NTcwYzgiLCAiaWQiOiAiNWY0MjNjODRiNzYzNDJjZmI2ZTg5OTdhOGVkNDg2YmQiLCAicHVibGljVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzYvdjEvZDJmN2Q3OTM5ZDU3NDY3YmFkNThmNjNlMjI5NTcwYzgifV0sICJlbmRwb2ludHNfbGlua3MiOiBbXSwgInR5cGUiOiAidm9sdW1lIiwgIm5hbWUiOiAiY2luZGVyIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6ODc3My9zZXJ2aWNlcy9BZG1pbiIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzMvc2VydmljZXMvQ2xvdWQiLCAiaWQiOiAiNjhjZjM0ODllMzc4NDcyMzk2N2QxOWU5MjE2MDkyYmUiLCAicHVibGljVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5Ojg3NzMvc2VydmljZXMvQ2xvdWQifV0sICJlbmRwb2ludHNfbGlua3MiOiBbXSwgInR5cGUiOiAiZWMyIiwgIm5hbWUiOiAiZWMyIn0sIHsiZW5kcG9pbnRzIjogW3siYWRtaW5VUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6MzUzNTcvdjIuMCIsICJyZWdpb24iOiAiUmVnaW9uT25lIiwgImludGVybmFsVVJMIjogImh0dHA6Ly8xNjYuNzguMTguMjA5OjUwMDAvdjIuMCIsICJpZCI6ICI2NTMwZTU4MjQ3Y2I0MWFhYTQ3MDgwZDE4ZjkyZmQwZCIsICJwdWJsaWNVUkwiOiAiaHR0cDovLzE2Ni43OC4xOC4yMDk6NTAwMC92Mi4wIn1dLCAiZW5kcG9pbnRzX2xpbmtzIjogW10sICJ0eXBlIjogImlkZW50aXR5IiwgIm5hbWUiOiAia2V5c3RvbmUifV0sICJ1c2VyIjogeyJ1c2VybmFtZSI6ICJhZG1pbiIsICJyb2xlc19saW5rcyI6IFtdLCAiaWQiOiAiMTY4NjhlNDU1NGE3NDJjZmI1YzY0YjYxNTkwZmRiNWYiLCAicm9sZXMiOiBbeyJuYW1lIjogImFkbWluIn1dLCAibmFtZSI6ICJhZG1pbiJ9LCAibWV0YWRhdGEiOiB7ImlzX2FkbWluIjogMCwgInJvbGVzIjogWyJhOTJjYjk3ZmM5NWY0YzIwOGQxMzU1Y2ZkMjRiODg0ZiJdfX19MYIBgTCCAX0CAQEwXDBXMQswCQYDVQQGEwJVUzEOMAwGA1UECAwFVW5zZXQxDjAMBgNVBAcMBVVuc2V0MQ4wDAYDVQQKDAVVbnNldDEYMBYGA1UEAwwPd3d3LmV4YW1wbGUuY29tAgEBMAcGBSsOAwIaMA0GCSqGSIb3DQEBAQUABIIBAD0eJgBw2y4R6tk5RI-835zA6v1f6rTgUO7+1DSqMkcPSHzxeUPVlsr06ygzTAzV11-vR0xcSJGvxNMMONVTJ2Imszz9q60KmYTcje3w+3idgOdTsgU+RLd8beFJ0uJn+8hAylHmQkXH12hCoS4Uzzfj7lm66scADuaUptnyYn9nPpODNhJCN6T3lttOxYcVzwH6AaIpipkFkliimY5i6CaW7MHQxcdBM+JwFcgULTjTRlRv3MDOxNnBw0LBYQ6nMnlNmpvzsqIcPbxJpyD9Ab-l1dGwWOvZlFRo4UFC4yglJSgwiI-Ei-KpghUl+1IMgd4IB0kSHmvlHNXLnksiNb4=" 

#response = RestClient::Request.execute(:method => :get, :content_type => :json, :accept => :json, :url => 'http://localhost:8777/v2/meters/cpu_util', :headers => { 'X-Auth-Token' => "#{token}"})

response1= RestClient.get("http://localhost:8777/v2/meters/cpu_util/statistics", { 'X-Auth-Token' => "#{token}", :content_type => :json, :accept => :json })

#puts response1

result = JSON.parse(response1) 

diskread = RestClient.get("http://localhost:8777/v2/meters/network.incoming.bytes/statistics", { 'X-Auth-Token' => "#{token}", :content_type => :json, :accept => :json })

diskread = JSON.parse(diskread) 

puts diskread[0]['sum'] 
#puts result[0]['avg'] 
